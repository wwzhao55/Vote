 <script src='../resource/js/jquery.min.js'></script>
 <script src="../resource/js/jquery.uploadView.js"></script>
 <script src="../resource/js/ajaxfileupload.js"></script>
<style>

.ax_default {
    font-family: 'Arial Normal', 'Arial';
    font-weight: 400;
    font-style: normal;
    font-size: 13px;
    color: #333333;
    text-align: center;
    line-height: normal;
}
div {
    display: block;
}
.label {
    font-size: 14px;
    text-align: left;
}
#u120 {
    border-width: 0px;
    position: absolute;
    left: 285px;
    top: 223px;
    width: 81px;
    height: 24px;
    font-size: 20px;
}
#u121 {
    border-width: 0px;
    left: 0px;
    top: 0px;
    width: 81px;
    white-space: nowrap;
}
#u121 span{
	width: 80px;
	height: 22px;
}
#u122 {
    border-width: 0px;
    position: absolute;
    left: 285px;
    top: 431px;
    width: 81px;
    height: 24px;
    font-size: 20px;
}


#u122_div {
    border-width: 0px;
    position: absolute;
    left: 0px;
    top: 0px;
    width: 81px;
    height: 24px;
    background: inherit;
    background-color: rgba(255, 255, 255, 0);
    border: none;
    border-radius: 0px;
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
    font-size: 20px;
}

#u122 {
    border-width: 0px;
    position: absolute;
    left: 285px;
    top: 431px;
    width: 81px;
    height: 24px;
    font-size: 20px;
}
#u124 {
    border-width: 0px;
    position: absolute;
    left: 285px;
    top: 636px;
    width: 81px;
    height: 24px;
    font-size: 20px;
}


#u124_div {
    border-width: 0px;
    position: absolute;
    left: 0px;
    top: 0px;
    width: 81px;
    height: 24px;
    background: inherit;
    background-color: rgba(255, 255, 255, 0);
    border: none;
    border-radius: 0px;
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
    font-size: 20px;
}
#u124 {
    border-width: 0px;
    position: absolute;
    left: 285px;
    top: 636px;
    width: 81px;
    height: 24px;
    font-size: 20px;
}
/*#u125 {
    border-width: 0px;
    position: absolute;
    left: 0px;
    top: 0px;
    width: 81px;
    white-space: nowrap;
}*/
#u126 {
    border-width: 0px;
    position: absolute;
    left: 391px;
    top: 358px;
    width: 300px;
    height: 170px;
}
.text_area {
    color: #000000;
    text-align: left;
}

#u126_input {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 300px;
    height: 170px;
    font-family: 'Arial Normal', 'Arial';
    font-weight: 400;
    font-style: normal;
    font-size: 13px;
    text-decoration: none;
    color: #000000;
    text-align: left;
}
textarea {
    margin: 0px;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
}

textarea {
    font-family: monospace;
    border-color: rgb(169, 169, 169);
}
textarea {
    -webkit-appearance: textarea;
    background-color: white;
    -webkit-rtl-ordering: logical;
    user-select: text;
    flex-direction: column;
    resize: auto;
    cursor: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
    border-width: 1px;
    border-style: solid;
    border-color: initial;
    border-image: initial;
    padding: 2px;
}

#u127 {
    border-width: 0px;
    position: absolute;
    left: 232px;
    top: 80px;
    width: 252px;
    height: 37px;
    font-family: 'Arial Negreta', 'Arial Normal', 'Arial';
    font-weight: 700;
    font-style: normal;
}
#u128 {
    border-width: 0px;
    left: 0px;
    top: 0px;
    width: 252px;
    white-space: nowrap;
}
#u128 span {
    font-family: 'Arial Normal', 'Arial';
    font-weight: bold;
    font-style: normal;
    font-size: 32px;
    text-align: left;
}
#u129 {
    border-width: 0px;
    position: absolute;
    left: 471px;
    top: 751px;
    width: 140px;
    height: 40px;
}
#u129_div {
    border-width: 0px;
    position: absolute;
    left: 0px;
    top: 0px;
    width: 140px;
    height: 40px;
    background: inherit;
    background-color: rgba(255, 255, 255, 1);
    box-sizing: border-box;
    border-width: 1px;
    border-style: solid;
    border-color: rgba(121, 121, 121, 1);
    border-radius: 5px;
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
}
#u130 {
    border-width: 0px;
    position: absolute;
    left: 2px;
    top: 12px;
    width: 136px;
    word-wrap: break-word;
}
#u133 {
    border-width: 0px;
    position: absolute;
    left: 391px;
    top: 223px;
    width: 300px;
    height: 25px;
}
.text_field {
    color: #000000;
    text-align: left;
}


#u133_input {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 300px;
    height: 25px;
    font-family: 'Arial Normal', 'Arial';
    font-weight: 400;
    font-style: normal;
    font-size: 13px;
    text-decoration: none;
    color: #000000;
    text-align: left;
}
input {
    padding: 1px 0px 1px 0px;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
}

#u134 {
    border-width: 0px;
    position: absolute;
    left: 391px;
    top: 580px;
    width: 150px;
    height: 150px;
}
#u134_img {
    border-width: 0px;
    position: absolute;
    left: 0px;
    top: 0px;
    width: 150px;
    height: 150px;
}
#u135 {
    border-width: 0px;
    position: absolute;
    left: 2px;
    top: 67px;
    width: 146px;
    visibility: hidden;
    word-wrap: break-word;
}
span.add-work1 {
    top: 60px;
    width: 50px;
    height: 50px;
    display: inline-block;
    position: relative;
    margin-left: 170px;
}
span.add-work1 img {
    width: 30px;
    height: 30px;
    cursor: pointer;
    vertical-align: middle;
}
#queding:hover{
	cursor: pointer;
}
</style>
<!-- shareconfig -->
<div id="u128">
	<p><span>苗绣银装 / 分享设置</span></p>
</div>
<form action="" id="yourformid">

<div id="u120" class="ax_default label">
	<div id="u120_div" class=""></div>
	<div id="u121" class="text">
		<p>
			<span>分享标题</span>
		</p>
	</div>
</div>
<div id="u122" class="ax_default label">
	<div id="u122_div" class=""></div>
	<div id="u123" class="text">
		<p>
			<span>分享描述</span>
		</p>
	</div>
</div>
<div id="u126" class="ax_default text_area">
	<textarea id="u126_input" name="description" style="color: rgb(153, 153, 153);"></textarea>
</div>
<div id="u133" class="ax_default text_field">
	<input id="u133_input" type="text" name="title" value="" style="color: rgb(153, 153, 153);">
</div>
<div id="u124" class="ax_default label">
	<div id="u124_div" class=""></div>
	<div id="u125" class="text">
		<p>
			<span>分享图片</span>
		</p>
	</div>
</div>
<div id="u134" class="ax_default image">
	<span id="addimg" class="add-work1">
		<img src="../public/images/add-work.png"></span>
	<div class="showImg" style="display: inline-block;">
		<div class="showImg1" style="width: 150px;height: 150px;display:inline-block; position:absolute; top: 0px; left: 0px" ></div>
		<img id="u134_img" class="img u134_img" src="../public/images/u134.png">
		<input type="text" name="img" id="id_img" style="display: none;">
		<input type="file"  id="edit_img_button" name='img'  style="display: none;"/>
	</div>
</div>
<div id="u129" class="ax_default button">
	<div id="u129_div" class=""></div>
	<div id="u130" class="text">
		<p id="queding">
			<span >确定</span>
		</p>
	</div>
</div>
	
</form>
<script type="text/javascript">
	$('#sider-award').addClass('active');
$(function(){
	    $.ajax({
            type: "get",
            url:'shareConfig.php',
            // data:data,
            dataType: "json",
            success: function(data){
            	console.log(data);
              if(data.status=="success"){
            	var data=data.data;
                console.log("获取成功！");
                console.log(data.title);
                console.log(data.description);
                console.log(data.img);
                $("#u133_input").val(data.title);
                $("#u126_input").val(data.description);
                $("#u134_img").attr("src",'../'+data.img);
              }
              else{
                alert("获取失败！");
              }
           }
         })
	

})

$("#addimg").on("click",function(){
	console.log("jinru");
	$("#edit_img_button").click();
	$("#u134_img").css("display","none");
});
$("#edit_img_button").uploadView({
	  uploadBox: '.showImg',//设置上传框容器
	  showBox : '.showImg1',//设置显示预览图片的容器  
	  width: 150,               
	  height : 150, //预览图片的高度，单位px
	  allowType: ["gif", "jpeg", "jpg", "bmp", "png"], //允许上传图片的类型
	  maxSize :2, //允许上传图片的最大尺寸，单位M
	  success:function(e){
	                
	  }
});

// post提交数据
$("#queding").on('click',function () {
	$("#id_img").val($("#edit_img_button").val());
	 // $.ajax({
  //       type: "post",
  //       url:'/cms/shareConfig.php',
  //       data:$('#yourformid').serialize(),// 你的formid
  //       dataType: "json",
  //       success: function(data){
  //         if(data.status=="success"){
  //           console.log("修改成功！");
  //         }
  //         else{
  //           alert("修改失败！");
  //         }
  //      }
  //    });
	$.ajaxFileUpload
	(
	    {
	        url: "shareConfig.php", //用于文件上传的服务器端请求地址
	        data: { title: $("#u133_input"), description: $("#u126_input") }, //此参数非常严谨，写错一个引号都不行
	        secureuri: false, //是否需要安全协议，一般设置为false
	        fileElementId: 'edit_img_button', //文件上传域的ID
	        dataType: 'json', //返回值类型 一般设置为json
	        type:'POST',
	        success: function (data, status)  //服务器成功响应处理函数
	        {
	            
	           alert("修改成功！");
	             
	        },
	        error: function (data, status, e)//服务器响应失败处理函数
	        {
	             alert("修改失败");

	        }
	    }
	)
})
</script>
